1. 계정 생성
CREATE USER WIKI IDENTIFIED BY 1234;

2. 권한 부여
GRANT CONNECT, RESOURCE TO WIKI;

3. 테이블 만들기
	MEMBER
CREATE TABLE MEMBER (
	ID VARCHAR2(20) NOT NULL PRIMARY KEY,
	PW VARCHAR2(20) NOT NULL,
	NAME VARCHAR2(20) NOT NULL,
	EMAIL VARCHAR2(30),
	GRADE VARCHAR2(10) NOT NULL,
	SIGNDATE DATE DEFAULT SYSDATE
);


CREATE TABLE DOCUMENT (
	DOC_NUM number not null primary key,
	DOC_ID varchar2(20) not null,
	DOC_TITLE varchar2(100) not null,
	DOC_CONTENT varchar2(4000) not null,
	GOODCOUNT NUMBER DEFAULT 0,
	WRITEDATE DATE DEFAULT SYSDATE
);



	COMMENTS
CREATE TABLE COMMENTS (
	DOCNUM NUMBER NOT NULL,
	TAGNAME VARCHAR(10),
	COMNUM NUMBER NOT NULL PRIMARY KEY,
	COCONTENT VARCHAR2(2000) NOT NULL,
	ID VARCHAR(20) NOT NULL,
	WRITEDATE DATE DEFAULT SYSDATE
);

	TAG
CREATE TABLE TAG (
	TAGNAME VARCHAR2(10) PRIMARY KEY
);

	MEMCLASS
CREATE TABLE MEMCLASS (
	GRADE VARCHAR2(10) PRIMARY KEY
);


	FREEBOARD
CREATE TABLE FREEBOARD (
	BNUM NUMBER NOT NULL PRIMARY KEY,
	ID VARCHAR2(20) NOT NULL,
	BTITLE VARCHAR2(50) NOT NULL, 
	BCONTENT VARCHAR2(2000) NOT NULL,
	BWRITEDATE DATE DEFAULT SYSDATE,
	FOREIGN KEY(ID)
	REFERENCES MEMBER(ID)
);

4-1. 어드민 계정 생성
INSERT INTO MEMBER
VALUES ('ADMIN', '1234', 'ADMIN', '', 'ADMIN', SYSDATE);

4-2. 태그 입력
INSERT INTO TAG
VALUES ('PURPOSE');
INSERT INTO TAG
VALUES ('USING');
INSERT INTO TAG
VALUES ('MOREINFO');
INSERT INTO TAG
VALUES ('QNA');	

4-3. 맴버 등급 입력
INSERT INTO MEMCLASS
VALUES ('ADMIN');
INSERT INTO MEMCLASS
VALUES ('PUBLIC');
INSERT INTO MEMCLASS
VALUES ('EDITOR');

5. 관계 설정
ALTER TABLE MEMBER
ADD CONSTRAINT MEMBER_MEMCLASS_FK FOREIGN KEY(GRADE)
REFERENCES MEMCLASS(GRADE);

ALTER TABLE DOCUMENT
ADD CONSTRAINT DOCUMENT_MEMBER_FK FOREIGN KEY(DOC_ID)
REFERENCES MEMBER(ID);

ALTER TABLE COMMENTS
ADD CONSTRAINT COMMENTS_DOCUMENT_FK FOREIGN KEY(DOCNUM)
REFERENCES DOCUMENT(DOC_NUM);

ALTER TABLE COMMENTS
ADD CONSTRAINT COMMENTS_TAG_FK FOREIGN KEY(TAGNAME)
REFERENCES TAG(TAGNAME);

ALTER TABLE COMMENTS
ADD CONSTRAINT COMMENTS_MEMBER_FK FOREIGN KEY(ID)
REFERENCES MEMBER(ID);


6.문서번호 할당용 시퀀스 생성
CREATE SEQUENCE wiki_docnum_counter
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE  9999
	NOCYCLE
	NOCACHE;



** FREEBOARD 시퀀스 생성
CREATE SEQUENCE seq_wiki_freeboard
	INCREMENT BY 1
	START WITH 1
	MINVALUE 1
	MAXVALUE 1000
	NOCYCLE
	NOCACHE;

CREATE SEQUENCE SEQ_DOCUMENT_NUM  
	INCREMENT BY 1 
	START WITH 1 
	MINVALUE 1 
	MAXVALUE 1000 
	NOCYCLE 
	NOCACHE;

CREATE SEQUENCE SEQ_COMMENTS_COMNUM
	INCREMENT BY 1 
	START WITH 1 
	MINVALUE 1 
	MAXVALUE 1000 
	NOCYCLE 
	NOCACHE;
